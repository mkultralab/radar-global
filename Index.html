<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Global Ops Tracker - Mobile</title>
    <!-- Bibliotecas Diretas (Sem links de pesquisa do Google) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; background-color: #05070a; color: #e5e7eb; overflow: hidden; font-family: 'JetBrains Mono', monospace; }
        #map { position: absolute; top: 60px; bottom: 0; left: 0; right: 0; z-index: 1; background-color: #05070a; }
        .leaflet-layer { filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%); }
        .strike-marker { background: #ff0000; border: 2px solid #fff; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 70% { transform: scale(1.5); opacity: 0; } 100% { transform: scale(1); opacity: 0; } }
        #radar-grid { position: absolute; top: 60px; left: 0; width: 100%; height: 100%; pointer-events: none; background-image: radial-gradient(circle, rgba(0,255,100,0.05) 1px, transparent 1px); background-size: 30px 30px; z-index: 2; }
    </style>
</head>
<body class="flex flex-col h-screen">
    <header class="h-[60px] bg-black border-b border-gray-800 flex items-center justify-between px-4 z-20">
        <div class="flex items-center gap-2">
            <i data-lucide="radar" class="text-red-600 w-5 h-5 animate-pulse"></i>
            <h1 class="font-black text-lg text-white uppercase italic">Ops <span class="text-red-600">Global</span></h1>
        </div>
        <div id="clock" class="text-[10px] text-gray-400">00:00:00 UTC</div>
    </header>
    <div class="relative flex-1">
        <div id="map"></div>
        <div id="radar-grid"></div>
        <div id="term" class="absolute top-4 left-4 bg-black/90 p-4 border-l-2 border-red-600 z-[1000] w-64 opacity-0 transition-all text-[10px]">
            <h2 id="t-title" class="font-bold text-red-600 uppercase">SISTEMA</h2>
            <div id="t-msg" class="text-gray-400 mt-1"></div>
        </div>
        <div class="absolute bottom-6 right-6 flex flex-col gap-3 z-[1000]">
            <button onclick="runB2()" class="bg-red-700 p-4 rounded-full text-white shadow-2xl active:scale-90"><i data-lucide="plane"></i></button>
            <button onclick="getGPS()" class="bg-blue-700 p-4 rounded-full text-white shadow-2xl active:scale-90"><i data-lucide="crosshair"></i></button>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        lucide.createIcons();
        let map, tg = L.layerGroup();
        window.onload = () => {
            map = L.map('map', { zoomControl: false, attributionControl: false, center: [20, 0], zoom: 2 });
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
            tg.addTo(map);
            setInterval(() => { document.getElementById('clock').innerText = new Date().toISOString().split('T')[1].split('.')[0] + " UTC"; }, 1000);
            setTimeout(() => { map.invalidateSize(); log("MOBILE CMD", "Uplink Motorola ativo. Satélites sincronizados."); }, 1000);
        };
        function log(h, m) {
            const t = document.getElementById('term');
            document.getElementById('t-title').innerText = h;
            document.getElementById('t-msg').innerText = "> " + m;
            t.style.opacity = "1";
            setTimeout(() => t.style.opacity = "0", 5000);
        }
        function runB2() {
            tg.clearLayers();
            map.flyTo([32.42, 53.68], 6);
            log("MISSÃO", "Incursão B-2 detectada em espaço restrito.");
            [[32.42, 53.68], [33.72, 51.72]].forEach(p => {
                L.marker(p, { icon: L.divIcon({ className: 'strike-marker', iconSize: [16, 16] }) }).addTo(tg);
            });
        }
        function getGPS() {
            navigator.geolocation.getCurrentPosition(p => {
                const { latitude, longitude } = p.coords;
                log("GPS LOCK", `${latitude.toFixed(4)}, ${longitude.toFixed(4)}`);
                tg.clearLayers();
                L.marker([latitude, longitude]).addTo(tg);
                map.flyTo([latitude, longitude], 15);
            }, () => log("ERRO", "Ativa o GPS no teu Motorola."));
        }
    </script>
</body>
</html>

